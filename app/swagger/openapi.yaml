openapi: 3.0.0
info:
  title: Doctor Appoinment app
  version: 1.0.0
  description: documentation of doc Appoinment app
servers:
  - url: 'http://localhost:3000/api'
tags:
  - name: Auth
    description: Api related to authentication
paths:
  /auth/login:
    post:
      tags:
        - Auth
      summary: Login
      description: User login to the VS app
      requestBody:
        description: Request body for login API
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  description: Email address of the user.
                  example: johndoe@example.com
                password:
                  type: string
                  description: Password of the user
                  example: '**************'
                  minLength: 6
      responses:
        '201':
          description: Success Response
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    required:
                      - success
                      - message
                      - access_token
                    properties:
                      success:
                        type: boolean
                        example: true
                      access_token:
                        type: string
                        example: eyjnkdjnsd****.eyjsnkdjskd***.eyj*****
                      message:
                        type: string
                        example: user logged in succsessfully
                  - type: object
                    required:
                      - success
                      - message
                      - requires_otp
                    properties:
                      success:
                        type: boolean
                        example: true
                      message:
                        type: string
                        example: User logged in successfully. OTP sent to email.
                      requires_otp:
                        type: boolean
                        example: true
              examples:
                NormalLogin:
                  summary: Login without Mfa
                  description: login user that not enabled mfa option
                  value:
                    success: true
                    message: user logged in succsessfully
                    access_token: eyJhbGciOiJIUzI1NiIsInR...
                OtpLogin:
                  summary: Login with Mfa
                  description: login user that enabled mfa option
                  value:
                    success: true
                    message: User logged in successfully. OTP sent to email.
                    requires_otp: true
        '400':
          description: Validation Error Response
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - message
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: correspond error message
        '401':
          description: Invalid Credential Response
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - message
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
              examples:
                InvalidEmail:
                  summary: Invalid Email Address
                  description: The provided email address does not match any user in the system.
                  value:
                    success: false
                    message: Invalid email
                InvalidPassword:
                  summary: Incorrect Password
                  description: The provided password does not match the one associated with the user account.
                  value:
                    success: false
                    message: Invalid password
        '500':
          description: Internal Server Error Response
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - message
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
              examples:
                EmailSendFailure:
                  summary: OTP email failed
                  description: 'Login verified, but failed to send OTP email.'
                  value:
                    success: false
                    message: 'Login verified, but failed to send OTP email. Try again or contact support.'
                GenericServerError:
                  summary: Unexpected server error
                  description: Generic internal server error during login.
                  value:
                    success: false
                    message: Something went wrong. Please try again later.
components:
  securitySchemes:
    BearerAuth:
      type: apiKey
      name: Authorization
      in: header
